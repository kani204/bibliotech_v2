<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('partials/head.ejs') %>
  </head>
  <body>
    <header>
      <%- include('partials/navbar.ejs') %>
    </header>
    <div class="wrapper">
      <main class="catalogo-container">
        <section class="busqueda">
          <h3>Buscar obra...</h3>
          <form action="/catalogo" method="GET">
            <div class="barraBusqueda">
              <input type="text" name="title" placeholder="Titulo...">
              <button type="submit">Buscar</button>
              <a href="/catalogo" class="recargar">
                <img src="/img/recargar.png" alt="Recargar">
              </a>
            </div>
            <div class="filtro">
              <p>Genero</p>
              <select name="generoId">
                <option value="off">Seleccionar</option>
                <% categorias.forEach(categoria => { %> 
                  <% if(categoria.id == generoId) { %>
                    <option selected value="<%- categoria.id %>">
                      <%- categoria.name %>
                    </option>
                  <% } else { %>
                    <option value="<%- categoria.id %>">
                      <%- categoria.name %>
                    </option>
                  <% } %>
                <% }) %>
              </select>
            </div>
          </form>
        </section>
        <h2>Libros disponibles</h2>
        <div class="catalogo">
          <% if(libros.length > 0) {%>
            <% libros.forEach(libro => { %>
              <div class="serie">
                <figure>
                  <a href="/libro/<%- libro.LibroID %>"><img src="<%- libro.imagen %>" /></a>
                </figure>
                <div class="title">
                  <a href="/libro/<%- libro.LibroID %>"><%- libro.Titulo %></a>
                </div>
              </div>
            <% })%>
          <% } else { %>
            <h2 class="mensajeError">No hemos encontrado nada...</h2>
          <% } %>
        </div>
      </main>
      <footer class="footerContainer">
        <%- include('partials/footer.ejs') %>
      </footer>
    </div>
  </body>
</html>
